
硬连接没有创建新的inode，软连接创建了新的inode。

```shell
(base) lv@lv:ext2$ ls -alhi
总用量 129K
       2 drwxr-xr-x  3 lv   root 1.0K 3月  15 00:41 .
45481985 drwxrwxrwt 21 root root 112K 3月  15 00:41 ..
      12 -rw-rw-r--  1 lv   lv      0 3月  13 12:35 f1.txt
      13 -rw-rw-r--  1 lv   lv      0 3月  13 12:35 f2.txt
      14 -rw-rw-r--  2 lv   lv      0 3月  13 12:35 f3_pl.txt
      17 lrwxrwxrwx  1 lv   lv      6 3月  15 00:41 f3_sl.txt -> f3.txt
      14 -rw-rw-r--  2 lv   lv      0 3月  13 12:35 f3.txt
      15 -rw-rw-r--  1 lv   lv      0 3月  13 12:35 f4.txt
      16 -rw-rw-r--  1 lv   lv      0 3月  13 12:35 f5.txt
      11 drwx------  2 root root  12K 3月  13 11:52 lost+found

(base) lv@lv:ch4$ hexdump -n 1024 -s 520192 ext2.bin  -v -C
0007f000  02 00 00 00 0c 00 01 02  2e 00 00 00 02 00 00 00  |................|
0007f010  0c 00 02 02 2e 2e 00 00  0b 00 00 00 14 00 0a 02  |................|
0007f020  6c 6f 73 74 2b 66 6f 75  6e 64 00 00 0c 00 00 00  |lost+found......|
0007f030  10 00 06 01 66 31 2e 74  78 74 00 00 0d 00 00 00  |....f1.txt......|
0007f040  10 00 06 01 66 32 2e 74  78 74 00 00 0e 00 00 00  |....f2.txt......|
0007f050  10 00 06 01 66 33 2e 74  78 74 00 00 0f 00 00 00  |....f3.txt......|
0007f060  10 00 06 01 66 34 2e 74  78 74 00 00 10 00 00 00  |....f4.txt......|
0007f070  10 00 06 01 66 35 2e 74  78 74 00 00 0e 00 00 00  |....f5.txt......|
0007f080  14 00 09 01 66 33 5f 70  6c 2e 74 78 74 00 00 00  |....f3_pl.txt...|

-- 一个inode 128 字节
-- 硬连接是在目录里面；
-- 软连接创建在新的inode里面；
-- 0x11 即是 17 ，inode id

0007f090  11 00 00 00 70 03 09 07  66 33 5f 73 6c 2e 74 78  |....p...f3_sl.tx|
0007f0a0  74 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |t...............|

-- inode 起始
--  267264 +  (17-1) * 128 =  269312

(base) lv@lv:ch4$ hexdump -n 128 -s 269312 ext2.bin  -v -C
00041c00  ff a1 e8 03 06 00 00 00  47 70 2f 62 43 70 2f 62  |........Gp/bCp/b|
00041c10  43 70 2f 62 00 00 00 00  e8 03 01 00 00 00 00 00  |Cp/b............|
00041c20  00 00 00 00 01 00 00 00  66 33 2e 74 78 74 00 00  |........f3.txt..|
00041c30  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00041c40  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00041c50  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00041c60  00 00 00 00 23 c0 8b 2f  00 00 00 00 00 00 00 00  |....#../........|
00041c70  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00041c80
```

### 从 VFS 到 Ext2 写
- DAX 模式： 不过缓存，不过通用I/O栈，直接使用设备驱动读写
- Direct I/O 模式：不过缓存，过通用I/O栈
- Normal I/O 模式：写缓存就返回或等待持久化
